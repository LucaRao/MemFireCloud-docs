---
weight: 5
title: "备份恢复"
description: ""
icon: "article"
date: "2023-12-13T17:39:49+08:00"
lastmod: "2023-12-13T17:39:49+08:00"
draft: false
toc: true
---



MemFire Cloud 提供灵活的数据备份计划，支持手动备份、自动备份两种方式，将关键核心的数据备份到第三方存储，为用户的云上数据库提供强有力的保护，保证数据不丢失。

## 手动备份
1. 用户登录MemFire Cloud后，进入数据库管理页面；  
2. 选中数据库列表中某个数据库所在列，单击“备份”按钮，则将手动为该数据库创建一个备份任务；    
![alt text](../_media/backup.png)
<!-- <div style="width:90%" >
<img src="../_media/backup.png"  alt="图片名称" align=center>
</div>  -->
3. 完成创建操作后，备份任务将会立即执行，可在“备份恢复”-“数据备份”中查看任务进展；   
![alt text](../_media/backup2.png)      
<!-- <div style="width:90%" >
<img src="../_media/backup2.png"  alt="图片名称" align=center>
</div>   -->


## 设置备份计划
1. 用户登录MemFire Cloud后，进入备份恢复页面；    
2. 单击“创建备份计划”按钮，弹出“创建备份计划”弹框； 
<div style="width:55%" >
<img src="../_media/backup4.png"  alt="图片名称" align=center>
</div> 
<!-- ![alt text](../_media/backup4.png)     -->

3. 在输入框内输入相关信息，包括：   
    - 备份计划名称:输入备份计划名称，最长为32个字符；
    - 备份数据库名称: 选择一个备份的数据库名称；
    - 备份周期: 周一，周二，周三，周四，周五，周六，周日，默认勾选周一，周三，周五，周日
    - 备份时间段: 可选择一天中某个时间端运行备份任务;默认选择05：00-06：00；
    - 保留天数: 正整数，默认7天
4. 单击“确定”按钮，则完成创建备份计划操作；   
<!-- ![alt text](../_media/backup5.png)  -->
<div style="width:65%" >
<img src="../_media/backup5.png"  alt="图片名称" align=center>
</div> 

## 修改备份计划

1. 用户登录MemFire Cloud后，进入备份恢复页面；      
2. 选中要修改的备份计划，单击编辑图标；  
<div style="width:65%" >
<img src="../_media/backup6.png"  alt="图片名称" align=center>
</div> 
<!-- ![alt text](../_media/backup6.png)   -->

3. 弹出“编辑备份计划”弹框；   
<div style="width:65%" >
<img src="../_media/backup7.png"  alt="图片名称" align=center>
</div> 
<!-- ![alt text](../_media/backup7.png)    -->

4. 可编辑项如下： 
    - 备份周期: 周一，周二，周三，周四，周五，周六，周日，默认勾选周一，周三，周五，周日
    - 备份时间段: 可选择一天中某个时间端运行备份任务;默认选择05：00-06：00;
    - 保留天数: 正整数，默认7天;   
5. 单击“修改”按钮，则完成编辑备份计划操作；  

## 删除备份计划

当不需要定期进行数据备份时，普通用户可以删除自动备份计划；  
1. 用户登录MemFire Cloud后，进入备份恢复页面；    
2. 选中要删除的备份计划，单击删除图标；  
<div style="width:70%" >
<img src="../_media/backup8.png"  alt="图片名称" align=center>
</div>
<!-- 
![alt text](../_media/backup8.png)   -->

3. 单击“确认”，则可删除备份计划，该计划对应的数据库定期备份任务将不再执行；

## 恢复数据
### 前置条件
数据恢复的前提条件：数据备份为“成功”状态；   
不同状态数据备份的操作说明：

{{< table "table-striped" >}}

| ***数据备份** | **恢复** | **手动删除** | **自动删除**                           |
| ------------- | -------- | ------------ | -------------------------------------- |
| “失败”备份    | 不支持   | 支持         | 仅支持删除自动备份操作后的“失败”的备份 |
| “成功”备份    | 支持     | 支持         | 仅支持删除自动备份操作后的“成功”的备份 |
| “删除中”备份  | 不支持   | 不支持       | 不支持                                 |
| “备份中”备份  | 不支持   | 不支持       | 不支持                                 |
| “恢复中”备份  | 不支持   | 不支持       | 不支持                                 |
{{< /table >}}

### 操作步骤

用户要恢复备份数据，可按照如下流程执行操作。     
1. 用户登录MemFire Cloud后，进入备份恢复-数据备份页面；  
2. 选中备份数据列表中要执行恢复操作的数据备份所在行，单击“恢复”按钮；  
3. 弹出“数据恢复”弹框，输入数据库名称；  
<div style="width:80%" >
<img src="../_media/recoverdata1.png"  alt="图片名称" align=center>
</div>
<!-- ![alt text](../_media/recoverdata1.png)   -->

   - 数据库名称：由小写字母、大写字母、数字、下划线组成，以字母开头，字母或数字结尾，最多32个字符；   
   - 数据库名称不能与用户名下已有的数据库重复；     
4. 单击“确定”按钮，则提交数据恢复操作。
<!-- <div style="width:90%" >
<img src="../_media/recoverdata2.png"  alt="图片名称" align=center>
</div> -->
 ![alt text](../_media/recoverdata2.png)  

5. 用户可以在数据库管理页面的数据库列表中找到该数据库，并查看恢复任务的进展；  

## 删除备份数据
### 前置条件
删除备份数据的前提条件：备份数据为“成功“或“异常”状态；

### 操作步骤
用户要删除备份数据，可按照如下流程执行操作。  
1. 用户登录MemFire Cloud后，进入备份恢复-数据备份页面；  
2. 选中备份数据列表中要执行删除操作的数据备份所在行，单击“删除”按钮，则可以删除备份数据。 
 <!-- ![alt text](../_media/deletebackup.png)     -->

当自动创建备份数据满足前提条件且超过保留天数时，系统会自动清理这些超时的备份数据；  